<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Oddjobs | Damage Calculator</title>
    <meta name="description" content="The guild for MapleStory odd-jobbers" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <link rel="icon" type="image/png" href="../img/favicon.png" />

    <script type="module" async defer src="./main.js"></script>
  </head>

  <body>
    <div id="nav-content-wrapper">
      <nav id="main-nav">
        <div id="main-nav-pullout"><span>&#x25b6;</span></div>

        <a href="../index.html" class="nav-h"
          >Oddjobs
          <br />
          <img
            src="../img/logo.svg"
            alt="Oddjobs logo | Due to Evan MacDonald of the Noun Project (CC BY 3.0)"
            title="Oddjobs logo | Due to Evan MacDonald of the Noun Project (CC BY 3.0)"
        /></a>

        <ul class="nav-list">
          <li>
            <a href="../index.html">Home</a>
          </li>
          <li>
            <a href="../join-on-up.html">Join On Up</a>
          </li>
          <li>
            <a href="../odd-jobs.html">Odd Jobs</a>
          </li>
          <li>
            <a href="../guides.html">Guides</a>
          </li>
          <li class="active">
            <a href="./index.html">Damage Calc</a>
          </li>
          <li>
            <a href="../source.html" data-jslicense="1">Source</a>
          </li>
        </ul>
      </nav>

      <div id="content">
        <header>
          <h1>Damage Calculator</h1>
          <span class="subtitle"
            >For all your weird pre-BB damage calculation needs!</span
          >

          <noscript>
            <div id="noscript">
              <p>
                It looks like you have JavaScript disabled or blocked. If your
                browser supports JavaScript, you need not worry about enabling
                it for this page, as the JavaScript on this page is entirely
                <a
                  target="_blank"
                  rel="noopener noreferrer"
                  href="https://en.wikipedia.org/wiki/Free_software"
                  >free</a
                >
                (<a
                  target="_blank"
                  rel="noopener noreferrer"
                  href="https://www.gnu.org/licenses/agpl-3.0"
                  >GNU AGPL v3</a
                >+). See
                <a href="../source.html" data-jslicense="1">the Source page</a>
                for more information and access to source code.
              </p>
            </div>
          </noscript>
        </header>

        <main>
          <a href="#assumptions" class="h-anchor"
            ><h2 id="assumptions">Assumptions</h2></a
          >

          <p>
            We assume that the player can attack as quickly as possible (i.e.
            holding down the attack button), and does so uninterrupted: they
            are never struck, never have to move, never use potions, &amp;c.,
            and also never miss.
          </p>

          <p>
            For now, only basic attacking is implemented (no skills, and no
            special attacks like bow-whacking).
          </p>

          <p>
            We assume that, for weapons with &ldquo;good&rdquo; and
            &ldquo;bad&rdquo; animations (e.g. stabbing and swinging,
            respectively, for spears), there is a &frac12; probability that the
            animation is &ldquo;good&rdquo;, and a &frac12; probability that
            the animation is &ldquo;bad&rdquo;.
          </p>

          <a href="#you-should-know" class="h-anchor"
            ><h2 id="you-should-know">You Should Know</h2></a
          >

          <p>
            Weapon speeds are calculated based on the speed of the weapon
            itself, in addition to any booster effects that may be active. The
            slowest possible speed is 9, and the fastest is 2. Booster skills
            add &minus;2 to your speed value, and so does Speed Infusion.
            Booster skills and Speed Infusion do stack, granting &minus;4 speed
            (in addition to the speed of your weapon) when both are active.
            However, your speed can never go below 2, so e.g. a weapon with
            speed 3 that is affected by a Booster skill is speed 2,
            <strong>not</strong> 1. You may need to use an external reference
            and/or look in the game files to find out the speed of any given
            weapon, because only some weapons have their true speeds displayed
            in-game. Others have ambiguous speed descriptions like
            &ldquo;Fast&rdquo;, which could correspond to a speed of 4, or to a
            speed of 5.
          </p>

          <p>
            Stats (STR, DEX, INT, LUK) are total stat values, after base stats
            <strong>and</strong> equipment <strong>and</strong> buffs.
            Likewise, total WATK is the sum of all WATK from your equipment
            (including both your weapon, and your other equips), plus WATK from
            skills, plus WATK from buffs.
          </p>

          <p>
            The mastery is given here as a percentage. Your mastery can never
            be less than 10%, but it can be higher, if you have one or more
            mastery skills. Most mastery skills increase your mastery up to a
            total of 60%, but some fourth-job skills can take you up to as high
            as 90%.
          </p>

          <p>
            Damage multipliers from skills, critical hits, and elemental
            effects work in tandem. All of these influences combine into a
            single multiplier that we will here refer to as &ldquo;the damage
            multiplier&rdquo;. This is the number by which you multiply your
            basic attack damage (for physical attacks, this is your basic
            attack &mdash; i.e. not using a skill &mdash; with no crits nor
            elemental effects nor reduction due to WDEF). These sources of
            damage multiplier (skills, crits, elemental effects) are
            <strong>additive</strong> in the sense that these multipliers are
            summed together, and then that sum makes up <em>the</em> damage
            multiplier.
            <strong
              >Note that basic attacks have a &ldquo;skill&rdquo; multiplier of
              1</strong
            >, i.e. as if you were using an attacking skill that said
            &ldquo;100% damage&rdquo; in the description. For example, say you
            use the Arrow Blow skill as an archer who has maxed both Arrow Blow
            (described in-game as &ldquo;Damage 260%&rdquo;) and Critical Shot
            (described in-game as &ldquo;40% success rate, critical damage
            200%&rdquo;). Let&rsquo;s assume that this particular use of Arrow
            Blow is a crit, and thus we get the benefit of the &ldquo;critical
            damage 200%&rdquo;. The damage multiplier is the sum of the
            multipliers from Arrow Blow and Critical Shot:
            2.6&nbsp;+&nbsp;2&nbsp;=&nbsp;4.6. Thus, we expect this attack to
            (again, assuming the monster has 0 WDEF) do 4.6 times as much as a
            non-critical basic attack would. Note that magic attacks work
            somewhat differently, and (as far as I know) do not use this
            additive notion of &ldquo;damage multiplier&rdquo;.
          </p>

          <p>
            The in-game description of the Sharp Eyes skill is somewhat
            misleading. At max level, the skill grants &ldquo;[Critical] Damage
            + 40%&rdquo;. However, this should probably read
            &ldquo;+140%&rdquo;, because the actual value that is added to the
            damage multiplier is 1.4. For those who already have a
            critical-hit-granting skill (archers, assassins/hermits/nightlords,
            and situationally marauders/buccaneers), interpreting Sharp Eyes is
            pretty straightforward: it just adds something to your
            already-existing critical chance and to your already-existing
            critical multiplier. For example, an archer with maxed Critical
            Shot and maxed Sharp Eyes has a
            0.4&nbsp;+&nbsp;0.15&nbsp;=&nbsp;0.55 probability of critting, and
            a critical multiplier of 2&nbsp;+&nbsp;1.4&nbsp;=&nbsp;3.4. For
            physical attackers who do
            <em>not</em> already have a critical-hit-granting skill, being
            buffed with maxed Sharp Eyes means an overall
            0&nbsp;+&nbsp;0.15&nbsp;=&nbsp;0.15 probability of critting, and a
            critical multiplier of 1.4; <strong>not</strong> a critical
            multiplier of 0.4. Note that the value referred to here as the
            &ldquo;critical multiplier&rdquo; is <strong>additive</strong> and
            <em>only</em> serves to cumulate into the overall &ldquo;damage
            multiplier&rdquo;. For more on this, see the previous paragraph.
            For magical attacks, the probability of critting with maxed Sharp
            Eyes is also 0.15, but an attack that crits does
            <strong>not</strong> add 1.4 to the damage multiplier of a
            non-crit, as you would expect (magical attacks do not use the same
            notion of &ldquo;damage multiplier&rdquo;). Instead, it simply
            multiplies the overall damage of the magical attack by a factor of
            1.4. Nevertheless, if you want to use the calculator for magical
            attacks combined with Sharp Eyes, you should set the values in the
            inputs below as if you were setting them for a physical attacker
            who has no critical-hit-granting skill of their own.
          </p>

          <p>
            It is possible for enemies to have negative WDEF values, due to
            effects like Threaten.
          </p>

          <p>
            The terms &ldquo;expectation&rdquo; and &ldquo;expected&rdquo; are
            here used in
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Expected_value"
              >the probability-theoretic sense</a
            >. The &ldquo;&sigma;&rdquo; symbol refers to
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Standard_deviation"
              >the standard deviation</a
            >, which is conveniently in the same units/dimensions as the values
            themselves. We often talk about the so-called
            &ldquo;stability&rdquo; of damage, which is essentially a way of
            talking about the
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Statistical_dispersion"
              >dispersion</a
            >
            of the damage instances, and the standard deviation is one way of
            quantifying dispersion. However, care must be taken when comparing
            two separate standard deviations, because standard deviation is an
            <em>absolute</em> measure of dispersion. As a result, two
            characters who appear to have roughly the <em>same</em> damage
            stability, but the magnitude of whose damage outputs &mdash; say,
            damage per hit, for example &mdash; are significantly different,
            will have damage-per-hit distributions with significantly
            <em>different</em> standard deviations. This is because the
            standard deviation is expressed in the same dimensions as the
            values themselves, so it scales up linearly as the values of the
            distribution are scaled up. To help get a <em>relative</em> (and
            thus more comparable) measure of damage stability,
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Coefficient_of_variation"
              >the coefficient of variation</a
            >
            (CV) is used. The CV is
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Dimensionless_quantity"
              >a dimensionless quantity</a
            >.
          </p>

          <a href="#calculator" class="h-anchor"
            ><h2 id="calculator">Calculator</h2></a
          >

          <div id="calculator-input">
            <fieldset id="stats">
              <legend>Stats</legend>

              <label for="str">
                STR
                <input type="number" id="str" name="str" min="4" value="4" />
              </label>

              <label for="dex">
                DEX
                <input type="number" id="dex" name="dex" min="4" value="4" />
              </label>

              <label for="int">
                INT
                <input type="number" id="int" name="int" min="4" value="4" />
              </label>

              <label for="luk">
                LUK
                <input type="number" id="luk" name="luk" min="4" value="4" />
              </label>
            </fieldset>

            <label for="total-watk">
              Total WATK
              <input
                type="number"
                id="total-watk"
                name="total-watk"
                min="0"
                value="0"
              />
            </label>

            <label for="mastery">
              Mastery
              <input
                type="number"
                id="mastery"
                name="mastery"
                min="10"
                max="90"
                step="5"
                value="10"
              />%
            </label>

            <fieldset id="crit">
              <label for="crit-prob">
                Critical chance
                <input
                  type="number"
                  id="crit-prob"
                  name="crit-prob"
                  min="0"
                  max="100"
                  value="0"
                />%
              </label>

              <label for="crit-dmg">
                Critical damage
                <input
                  type="number"
                  id="crit-dmg"
                  name="crit-dmg"
                  min="100"
                  max="300"
                  value="100"
                />%
              </label>
            </fieldset>

            <label for="class">
              Class
              <select name="class" id="class">
                <option value="0">Beginner</option>
                <option value="100">Warrior</option>
                <option value="200">Magician</option>
                <option value="300">Archer</option>
                <option value="400">Rogue</option>
                <option value="500">Pirate</option>
              </select>
            </label>

            <fieldset id="weapon">
              <legend>Weapon</legend>

              <label for="weapon-type">
                Type
                <select name="weapon-type" id="weapon-type">
                  <optgroup label="Warrior&rsquo;s">
                    <option value="30">One-handed sword</option>
                    <option value="40">Two-handed sword</option>
                    <option value="31">One-handed axe</option>
                    <option value="41">Two-handed axe</option>
                    <option value="32">One-handed blunt weapon</option>
                    <option value="42">Two-handed blunt weapon</option>
                    <option value="43">Spear</option>
                    <option value="44">Polearm</option>
                  </optgroup>

                  <optgroup label="Magician&rsquo;s">
                    <option value="37">Wand</option>
                    <option value="38">Staff</option>
                  </optgroup>

                  <optgroup label="Archer&rsquo;s">
                    <option value="45">Bow</option>
                    <option value="46">Crossbow</option>
                  </optgroup>

                  <optgroup label="Rogue&rsquo;s">
                    <option value="33">Dagger</option>
                    <option value="47">Claw</option>
                  </optgroup>

                  <optgroup label="Pirate&rsquo;s">
                    <option value="48">Knuckler</option>
                    <option value="49">Gun</option>
                  </optgroup>
                </select>
              </label>

              <label for="speed">
                Speed
                <select name="speed" id="speed">
                  <option value="2">2 (Faster)</option>
                  <option value="3">3 (Faster)</option>
                  <option value="4">4 (Fast)</option>
                  <option value="5">5 (Fast)</option>
                  <option value="6" selected>6 (Normal)</option>
                  <option value="7">7 (Slow)</option>
                  <option value="8">8 (Slow)</option>
                  <option value="9">9 (Slower)</option>
                </select>
              </label>
            </fieldset>

            <label for="enemy-wdef">
              Enemy&rsquo;s WDEF
              <input
                type="number"
                id="enemy-wdef"
                name="enemy-wdef"
                value="0"
              />
            </label>
          </div>

          <div id="calculator-output">
            <b>Range, <em>crit range</em>:</b>
            <span id="range">??? ~ ???</span>,
            <em id="crit-range">??? ~ ???</em>
            <br />
            <b>Expected dmg per hit:</b>
            <span id="expected-per-hit">???</span>
            <br />
            <b>&sigma;<sub>per hit</sub>, CV<sub>per hit</sub>:</b>
            <span id="sd-per-hit">???</span>, <span id="cv-per-hit">???</span>
            <br />
            <b>Expected DPS:</b> <span id="expected-dps">???</span>
            <br />
            <b>&sigma;<sub>DPS</sub>, CV<sub>DPS</sub>:</b>
            <span id="sd-dps">???</span>, <span id="cv-dps">???</span>
          </div>

          <a href="#legal" class="h-anchor"><h2 id="legal">Legal</h2></a>

          <p>
            All of the code on this page is entirely
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Free_software"
              >free</a
            >
            (<a
              target="_blank"
              rel="noopener noreferrer"
              href="https://www.gnu.org/licenses/agpl-3.0"
              >GNU AGPL v3</a
            >+). See
            <a href="../source.html" data-jslicense="1">the Source page</a>
            for more information and access to source code.
          </p>
        </main>
      </div>
    </div>
  </body>
</html>
