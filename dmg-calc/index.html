<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Oddjobs | Damage Calculator</title>
    <meta name="description" content="The guild for MapleStory odd-jobbers" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <link rel="icon" type="image/png" href="../img/favicon.png" />

    <script type="module" async defer src="./main.js"></script>
  </head>

  <body>
    <div id="nav-content-wrapper">
      <nav id="main-nav">
        <div id="main-nav-inner">
          <div id="main-nav-pullout"><span>&#x25b6;</span></div>

          <a href="../index.html" class="nav-h"
            >Oddjobs
            <br />
            <img
              src="../img/logo.svg"
              alt="Oddjobs logo | Due to Evan MacDonald of the Noun Project (CC BY 3.0)"
              title="Oddjobs logo | Due to Evan MacDonald of the Noun Project (CC BY 3.0)"
          /></a>

          <ul class="nav-list">
            <li>
              <a href="../index.html">Home</a>
            </li>
            <li>
              <a href="../join-on-up.html">Join On Up</a>
            </li>
            <li>
              <a href="../odd-jobs.html">Odd Jobs</a>
            </li>
            <li>
              <a href="../guides/index.html">Guides</a>
            </li>
            <li class="active">
              <a href="./index.html">Damage Calc</a>
            </li>
            <li>
              <a href="../source.html" data-jslicense="1">Source</a>
            </li>
          </ul>
        </div>
      </nav>

      <div id="content">
        <header>
          <h1>Damage Calculator</h1>
          <span class="subtitle"
            >For all your weird pre-BB damage calculation needs!</span
          >

          <noscript>
            <div id="noscript">
              <p>
                It looks like you have JavaScript disabled or blocked. If your
                browser supports JavaScript, you need not worry about enabling
                it for this page, as the JavaScript on this page is entirely
                <a
                  target="_blank"
                  rel="noopener noreferrer"
                  href="https://en.wikipedia.org/wiki/Free_software"
                  >free</a
                >
                (<a
                  target="_blank"
                  rel="noopener noreferrer"
                  href="https://www.gnu.org/licenses/agpl-3.0"
                  >GNU AGPL v3</a
                >+). See
                <a href="../source.html" data-jslicense="1">the Source page</a>
                for more information and access to source code.
              </p>
            </div>
          </noscript>
        </header>

        <main>
          <a href="#assumptions" class="h-anchor"
            ><h2 id="assumptions">Assumptions</h2></a
          >

          <p>
            We assume that the player can attack as quickly as possible (i.e.
            holding down the attack button), and does so uninterrupted: they
            are never struck, never have to move, never use potions, &amp;c.,
            and also never miss. We also assume that they are damaging exactly
            one foe at all times, and that that one foe has infinite HP. You
            can select a number of targets greater than one, but note that this
            does <strong>not</strong> take into account the damage taken by any
            of said virtual enemies, except for one of them. The ability to
            select a number of targets is only there for skills like Heal,
            which change their per-line damage based on the total number of
            targets.
          </p>

          <p>
            We assume that, for weapons with &ldquo;good&rdquo; and
            &ldquo;bad&rdquo; animations (e.g. stabbing and swinging,
            respectively, for spears), there is a &frac12; probability that the
            animation is &ldquo;good&rdquo;, and a &frac12; probability that
            the animation is &ldquo;bad&rdquo;.
          </p>

          <p>
            We assume that attacks with more than one line of damage calculate
            each line identically, even if the actual <em>outcomes</em> for the
            various lines may differ due to random chance. This assumption is
            violated by skills like Barrage.
          </p>

          <a href="#you-should-know" class="h-anchor"
            ><h2 id="you-should-know">You Should Know</h2></a
          >

          <p>
            Weapon speeds are calculated based on the speed of the weapon
            itself, in addition to any booster effects that may be active. The
            slowest possible speed is 9,<sup>[1]</sup> and the fastest is 2.
            Booster skills add &minus;2 to your speed value, and so does Speed
            Infusion.<sup>[2]</sup> Booster skills and Speed Infusion do stack,
            granting &minus;4 speed (in addition to the speed of your weapon)
            when both are active.<sup>[2]</sup> However, your speed can never
            go below 2, so e.g. a weapon with speed 3 that is affected by a
            Booster skill is speed 2, <strong>not</strong> 1. You may need to
            use an external reference and/or look in the game files to find out
            the speed of any given weapon, because only some weapons have their
            true speeds displayed in-game. Others have ambiguous speed
            descriptions like &ldquo;Fast&rdquo;, which could correspond to a
            speed of 4, or to a speed of 5.
          </p>

          <p>
            Stats (STR, DEX, INT, LUK) are total stat values, after base stats
            <strong>and</strong> equipment <strong>and</strong> buffs.
            Likewise, total WATK is the sum of all WATK from your equipment
            (including both your weapon, and your other equips), plus WATK from
            skills, plus WATK from buffs. Total MATK is defined similarly to
            total WATK, but it should be noted that it also includes the MATK
            that is due to your total INT score. This &ldquo;total MATK&rdquo;
            is displayed in-game as &ldquo;MAGIC&rdquo; inside of the
            &ldquo;DETAIL&rdquo; tab of the &ldquo;CHARACTER STATS&rdquo;
            window (in the keybinding GUI, this window is listed as
            &ldquo;ABILITY&rdquo;).
          </p>

          <p>
            The mastery is given here as a percentage. Your mastery can never
            be less than 10%, but it can be higher, if you have one or more
            relevant mastery skills (&ldquo;relevant&rdquo; because mastery
            skills typically only apply to certain classes of weapons, e.g.
            only axes). Most mastery skills increase your mastery up to a total
            of 60%, but some fourth-job skills can take you up to as high as
            90%. Mastery for magical attacks works on a per-spell basis (based
            on which spell it is and what level it&rsquo;s at), and should be
            listed in-game within the spell&rsquo;s description.
          </p>

          <p>
            The &ldquo;Damage multi&rdquo; field under &ldquo;Skill&rdquo;
            refers to the damage percentage listed in the description of a
            physical attack; for example, the Power Strike skill has a
            &ldquo;Damage multi&rdquo; of 260% at max level. The &ldquo;Basic
            attack&rdquo; only applies to magical attacks and summons, and is
            generally listed in the skill description as &ldquo;basic
            attack&rdquo;; for example, the Magic Claw skill has a &ldquo;Basic
            attack&rdquo; of 40 at max level. &ldquo;Lines&rdquo; refers to how
            many lines of damage the attacking skill does; for example, this
            value is 1 for Power Strike and 2 for Magic Claw. It is assumed
            that attacks with more than one line of damage calculate each line
            identically, even if the actual <em>outcomes</em> for the various
            lines may differ due to random chance. This assumption is violated
            by skills like Barrage.
          </p>

          <p>
            Damage multipliers from skills, critical hits, and elemental
            effects work in tandem. All of these influences combine into a
            single multiplier that we will here refer to as &ldquo;<strong
              >the</strong
            >
            damage multiplier&rdquo;. This is the number by which you multiply
            your basic attack damage (for physical attacks, this is your basic
            attack &mdash; i.e. not using a skill &mdash; with no crits nor
            elemental effects nor reduction due to WDEF). These sources of
            damage multiplier (skills, crits, elemental effects) are
            <strong>additive</strong> in the sense that these multipliers are
            summed together, and then that sum makes up <em>the</em> damage
            multiplier.
            <strong
              >Note that basic attacks have a &ldquo;skill&rdquo; multiplier of
              1</strong
            >, i.e. as if you were using an attacking skill that said
            &ldquo;100% damage&rdquo; in the description. For example, say you
            use the Arrow Blow skill as an archer who has maxed both Arrow Blow
            (described in-game as &ldquo;Damage 260%&rdquo;) and Critical Shot
            (described in-game as &ldquo;40% success rate, critical damage
            200%&rdquo;). Let&rsquo;s assume that this particular use of Arrow
            Blow is a crit, and thus we get the benefit of the &ldquo;critical
            damage 200%&rdquo;. The damage multiplier is the sum of the
            multipliers from Arrow Blow and Critical Shot:
            2.6&nbsp;+&nbsp;2&nbsp;=&nbsp;4.6. Thus, we expect this attack to
            (again, assuming the monster has 0 WDEF) do 4.6 times as much as a
            non-critical basic attack would. Note that magic attacks work
            somewhat differently, and (as far as I know) do not use this
            additive notion of &ldquo;damage multiplier&rdquo;.
          </p>

          <p>
            You can select a number of targets greater than one, but note that
            this does <strong>not</strong> take into account the damage taken
            by any of said virtual enemies, except for one of them. The ability
            to select a number of targets is only there for skills like Heal,
            which change their per-line damage based on the total number of
            targets. Note that when casting Heal (maximum of 6 targets), the
            caster counts as a target, thus lowering the maximum number of
            possible enemy targets from 6 to 5. Also note that Heal, unlike
            most spells, uses the &ldquo;Damage multi&rdquo; rather than the
            &ldquo;Basic attack&rdquo; (the damage multi is typically 300% at
            maximum level).
          </p>

          <p>
            The in-game description of the Sharp Eyes skill is somewhat
            misleading. At max level, the skill grants &ldquo;[Critical] Damage
            + 40%&rdquo;. However, this should probably read
            &ldquo;+140%&rdquo;, because the actual value that is added to the
            damage multiplier is 1.4. For those who already have a
            critical-hit-granting skill (archers, assassins/hermits/nightlords,
            and situationally marauders/buccaneers), interpreting Sharp Eyes is
            pretty straightforward: it just adds something to your
            already-existing critical chance and to your already-existing
            critical multiplier. For example, an archer with maxed Critical
            Shot and maxed Sharp Eyes has a
            0.4&nbsp;+&nbsp;0.15&nbsp;=&nbsp;0.55 probability of critting, and
            a critical multiplier of 2&nbsp;+&nbsp;1.4&nbsp;=&nbsp;3.4. For
            physical attackers who do
            <em>not</em> already have a critical-hit-granting skill, being
            buffed with maxed Sharp Eyes means an overall
            0&nbsp;+&nbsp;0.15&nbsp;=&nbsp;0.15 probability of critting, and a
            critical multiplier of 1.4; <strong>not</strong> a critical
            multiplier of 0.4. Note that the value referred to here as the
            &ldquo;critical multiplier&rdquo; is <strong>additive</strong> and
            <em>only</em> serves to cumulate into the overall &ldquo;damage
            multiplier&rdquo;. For more on this, see the previous paragraph.
            For magical attacks, the probability of critting with maxed Sharp
            Eyes is also 0.15, but an attack that crits does
            <strong>not</strong> add 1.4 to the damage multiplier of a
            non-crit, as you would expect (magical attacks do not use the same
            notion of &ldquo;damage multiplier&rdquo;). Instead, it simply
            multiplies the overall damage of the magical attack by a factor of
            1.4. Nevertheless, if you want to use the calculator for magical
            attacks combined with Sharp Eyes, you should set the values in the
            inputs below as if you were setting them for a physical attacker
            who has no critical-hit-granting skill of their own.
          </p>

          <p>
            It is possible for enemies to have negative WDEF values, due to
            effects like Threaten.
          </p>

          <p>
            Venom skills (Venomous Star and Venomous Stab) have their damage
            calculated for <strong>just the venom</strong> damage over time.
            Also note that these same skills make use of the &ldquo;Basic
            attack&rdquo; parameter, as noted in their skill descriptions.
          </p>

          <p>
            The terms &ldquo;expectation&rdquo; and &ldquo;expected&rdquo; are
            here used in
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Expected_value"
              >the probability-theoretic sense</a
            >. The &ldquo;&sigma;&rdquo; symbol refers to
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Standard_deviation"
              >the standard deviation</a
            >, which is conveniently in the same units/dimensions as the values
            themselves. We often talk about the so-called
            &ldquo;stability&rdquo; of damage, which is essentially a way of
            talking about the
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Statistical_dispersion"
              >dispersion</a
            >
            of the damage instances, and the standard deviation is one way of
            quantifying dispersion. However, care must be taken when comparing
            two separate standard deviations, because standard deviation is an
            <em>absolute</em> measure of dispersion. As a result, two
            characters who appear to have roughly the <em>same</em> damage
            stability, but the magnitude of whose damage outputs &mdash; say,
            damage per line, for example &mdash; are significantly different,
            will have damage-per-line distributions with significantly
            <em>different</em> standard deviations. This is because the
            standard deviation is expressed in the same dimensions as the
            values themselves, so it scales up linearly as the values of the
            distribution are scaled up. To help get a <em>relative</em> (and
            thus more comparable) measure of damage stability,
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Coefficient_of_variation"
              >the coefficient of variation</a
            >
            (CV) is used. The CV is
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Dimensionless_quantity"
              >a dimensionless quantity</a
            >.
          </p>

          <p>
            If you see an asterisk (*) on the right-hand side of a damage value
            (particularly, the upper bound of a range), it means that that
            value is <em>exactly</em> an integer, before it is sampled from.
            Damage ranges are <em>virtually</em> intervals of real numbers
            (actually
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Floating-point_arithmetic"
              >floating point numbers</a
            >, of course). To get a particular damage outcome, the interval is
            sampled from (as a
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Continuous_uniform_distribution"
              >continuous uniform distribution</a
            >), the sample is then
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Clamping_(graphics)"
              >clamped</a
            >
            to a minimum of 1, and the result&rsquo;s fractional part is then
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Truncation"
              >truncated</a
            >. There&rsquo;s some finer details here about the exact order of
            operations, but the point is that when a particular bound is
            <em>exactly</em> an integer, it becomes unclear whether or not it
            can ever be sampled. This is perhaps a bigger deal than it usually
            would be, because the fractional parts of the samples are
            truncated, making a sample of e.g. 2.999 effectively much less
            (viz. 1 less, instead of 0.001 less) than a sample of 3. If you see
            an asterisked value, you can effectively just subtract 1 from it.
            The method here chosen to display these liminal values is largely
            for completeness.<sup>[3]</sup>
          </p>

          <details>
            <summary>Footnotes for &ldquo;You Should Know&rdquo;</summary>

            <p>
              [1]: This is technically untrue; speeds above 9 are in fact
              possible, but would require equipping a weapon with a speed above
              9 (because there is no way to increase speed values with
              (de)buffs or similar). Such weapons conventionally do not exist,
              although see for example the
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://maplelegends.com/lib/equip?id=01322053"
                >Golden Mace</a
              >, which has a speed of 15 (but does not actually exist in
              MapleLegends as far as I know). As a result, attack period values
              for speeds above 9 are unknown &mdash; and they may just be the
              same as for speed 9.
            </p>

            <p>
              [2]: Depending on the implementation, this may or may not be
              exactly correct. In early versions of MapleStory that have
              pirates (e.g. GMS v62), the client did not have a separate buff
              opcode for Speed Infusion, so Speed Infusion has to be
              &ldquo;emulated&rdquo; by using an ordinary Booster buff with
              twice the magnitude of a normal Booster skill (4 instead of 2).
              The result is thus usually the same, but for jobs that lack a
              booster skill of their own, this can be a big boon (&minus;4 to
              the speed of their weapon when affected by Speed Infusion,
              instead of the expected &minus;2). Also worth noting here is that
              many implementations lack a separate opcode for Spell Booster, so
              Speed Infusion can effectively lower spellcasting speeds beyond
              the usual &minus;2 of maxed Spell Booster (all the way to
              &minus;4, potentially). This is another artifact/bug of early
              pirate implementations, and spellcasting speeds below &minus;2
              are not handled by this calculator.
            </p>

            <p>
              [3]: Typically (see e.g.
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html#random()"
                >in Java</a
              >), software functions that are intended to return a
              uniformly-distributed sample from an interval of floating point
              numbers do so from a nominally
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://mathworld.wolfram.com/Half-ClosedInterval.html"
                >half-closed interval</a
              >; in particular, the lower &ldquo;half&rdquo; (read: bound) is
              closed/included, while the upper &ldquo;half&rdquo; is
              open/excluded. As a result, an upper range bound that has an
              asterisk (*) can only be guaranteed to <em>nominally</em> be part
              of the range, and it may or may not have a nonzero probability of
              being sampled, depending upon the implementation. For reference,
              the number of
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://en.wikipedia.org/wiki/Single-precision_floating-point_format"
                >single-precision</a
              >
              (32-bit, typically <code>float</code> in
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://en.wikipedia.org/wiki/C_(programming_language)"
                >C</a
              >)
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://en.wikipedia.org/wiki/IEEE_754"
                >IEEE 754</a
              >
              floating point numbers within
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://en.wikipedia.org/wiki/Unit_interval"
                >the unit interval</a
              >
              is 1,065,353,217 &mdash; this number is only for scale, since
              precision varies depending on how far away from zero you are, and
              <a
                target="_blank"
                rel="noopener noreferrer"
                href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format"
                >double-precision</a
              >
              floating point numbers are common as well &mdash; but the point
              is that it shouldn&rsquo;t matter much for expected values and
              variances. It&rsquo;s just that it may (or may not) be impossible
              to <em>actually witness</em> that asterisked damage value.
            </p>
          </details>

          <a href="#calculator" class="h-anchor"
            ><h2 id="calculator">Calculator</h2></a
          >

          <div id="calculator-input">
            <fieldset id="stats">
              <legend>Stats</legend>

              <label for="str">
                STR
                <input type="number" id="str" name="str" min="4" value="4" />
              </label>

              <label for="dex">
                DEX
                <input type="number" id="dex" name="dex" min="4" value="4" />
              </label>

              <label for="int">
                INT
                <input type="number" id="int" name="int" min="4" value="4" />
              </label>

              <label for="luk">
                LUK
                <input type="number" id="luk" name="luk" min="4" value="4" />
              </label>
            </fieldset>

            <fieldset id="attack-stats">
              <legend>Attack stats</legend>

              <label for="total-watk">
                Total WATK
                <input
                  type="number"
                  id="total-watk"
                  name="total-watk"
                  min="0"
                  value="1"
                />
              </label>

              <label for="total-matk">
                Total MATK
                <input
                  type="number"
                  id="total-matk"
                  name="total-matk"
                  min="4"
                  value="4"
                />
              </label>
            </fieldset>

            <label for="mastery">
              Mastery
              <input
                type="number"
                id="mastery"
                name="mastery"
                min="10"
                max="90"
                step="5"
                value="10"
              />%
            </label>

            <fieldset id="skill">
              <legend>Skill</legend>

              <label for="skill-dmg-multi">
                Damage multi
                <input
                  type="number"
                  id="skill-dmg-multi"
                  name="skill-dmg-multi"
                  min="0"
                  value="100"
                />%
              </label>

              <label for="skill-basic-atk">
                Basic attack
                <input
                  type="number"
                  id="skill-basic-atk"
                  name="skill-basic-atk"
                  min="0"
                  value="10"
                />
              </label>

              <label for="skill-lines">
                Lines
                <input
                  type="number"
                  id="skill-lines"
                  name="skill-lines"
                  min="1"
                  value="1"
                />
              </label>
            </fieldset>

            <fieldset id="crit">
              <legend>Critical hits</legend>

              <label for="crit-prob">
                Critical chance
                <input
                  type="number"
                  id="crit-prob"
                  name="crit-prob"
                  min="0"
                  max="100"
                  value="0"
                />%
              </label>

              <label for="crit-dmg">
                Critical multi
                <input
                  type="number"
                  id="crit-dmg"
                  name="crit-dmg"
                  min="0"
                  max="300"
                  value="100"
                />%
              </label>
            </fieldset>

            <fieldset>
              <legend>Character</legend>

              <label for="class">
                Class
                <select name="class" id="class">
                  <option value="0" selected>Beginner</option>
                  <option value="100">Warrior</option>
                  <option value="200">Magician</option>
                  <option value="300">Archer</option>
                  <option value="400">Rogue</option>
                  <option value="500">Pirate</option>
                  <option value="510">Pirate &ge;2&#x207f;&#x1d48; job</option>
                </select>
              </label>

              <label for="level">
                Level
                <input
                  type="number"
                  id="level"
                  name="level"
                  min="1"
                  max="200"
                  value="30"
                />
              </label>
            </fieldset>

            <fieldset id="weapon">
              <legend>Weapon</legend>

              <label for="weapon-type">
                Type
                <select name="weapon-type" id="weapon-type">
                  <option value="0">[no weapon]</option>

                  <optgroup label="Warrior&rsquo;s">
                    <option value="30" selected>One-handed sword</option>
                    <option value="40">Two-handed sword</option>
                    <option value="31">One-handed axe</option>
                    <option value="41">Two-handed axe</option>
                    <option value="32">One-handed blunt weapon</option>
                    <option value="42">Two-handed blunt weapon</option>
                    <option value="43">Spear</option>
                    <option value="44">Polearm</option>
                  </optgroup>

                  <optgroup label="Magician&rsquo;s">
                    <option value="37">Wand</option>
                    <option value="38">Staff</option>
                  </optgroup>

                  <optgroup label="Archer&rsquo;s">
                    <option value="45">Bow</option>
                    <option value="46">Crossbow</option>
                  </optgroup>

                  <optgroup label="Rogue&rsquo;s">
                    <option value="33">Dagger</option>
                    <option value="47">Claw</option>
                  </optgroup>

                  <optgroup label="Pirate&rsquo;s">
                    <option value="48">Knuckler</option>
                    <option value="49">Gun</option>
                  </optgroup>
                </select>
              </label>

              <label for="attack">
                Attack
                <select name="attack" id="attack">
                  <option value="0" selected>[other]</option>
                  <option value="-1">[bow whack]</option>
                  <option value="-2">[claw punch]</option>

                  <optgroup label="Dragon Knight">
                    <option value="1311006">Dragon Roar</option>
                  </optgroup>

                  <optgroup label="Hunter">
                    <option value="3101003">Power Knock-Back</option>
                  </optgroup>

                  <optgroup label="Bowmaster">
                    <option value="3121006">Phoenix</option>
                  </optgroup>

                  <optgroup label="Crossbowman">
                    <option value="3101003">Power Knock-Back</option>
                  </optgroup>

                  <optgroup label="Marksman">
                    <option value="3221005">Frostprey</option>
                  </optgroup>

                  <optgroup label="Rogue">
                    <option value="4001344">Lucky Seven</option>
                  </optgroup>

                  <optgroup label="Night Lord">
                    <option value="4121007">Triple Throw</option>
                    <option value="4121004">Ninja Ambush</option>
                    <option value="4120005">Venomous Star</option>
                  </optgroup>

                  <optgroup label="Chief Bandit">
                    <option value="4211002">Assaulter</option>
                  </optgroup>

                  <optgroup label="Shadower">
                    <option value="4121004">Ninja Ambush</option>
                    <option value="4220005">Venomous Stab</option>
                  </optgroup>

                  <optgroup label="Pirate">
                    <option value="5001002">Somersault Kick</option>
                  </optgroup>

                  <optgroup label="Outlaw">
                    <option value="5211001">Octopus</option>
                    <option value="5211002">Gaviota</option>
                  </optgroup>

                  <optgroup label="Corsair">
                    <option value="5220002">Wrath of the Octopi</option>
                  </optgroup>
                </select>
              </label>

              <label for="spell">
                Spell
                <select name="spell" id="spell">
                  <option value="0">[other]</option>

                  <optgroup label="F/P Mage">
                    <option value="2111002">Explosion</option>
                    <option value="2111003">Poison Mist</option>
                    <option value="2111006">Element Composition</option>
                  </optgroup>

                  <optgroup label="F/P Archmage">
                    <option value="2121007">Meteor Shower</option>
                  </optgroup>

                  <optgroup label="I/L Mage">
                    <option value="2211002">Ice Strike</option>
                    <option value="2211003">Thunder Spear</option>
                    <option value="2211006">Element Composition</option>
                  </optgroup>

                  <optgroup label="I/L Archmage">
                    <option value="2221006">Chain Lightning</option>
                    <option value="2221007">Blizzard</option>
                  </optgroup>

                  <optgroup label="Cleric">
                    <option value="2301002">Heal</option>
                  </optgroup>

                  <optgroup label="Priest">
                    <option value="2311004">Shining Ray</option>
                  </optgroup>

                  <optgroup label="Bishop">
                    <option value="2321008">Genesis</option>
                  </optgroup>
                </select>
              </label>

              <label for="speed">
                Speed
                <select name="speed" id="speed">
                  <option value="2">2 (Faster)</option>
                  <option value="3">3 (Faster)</option>
                  <option value="4">4 (Fast)</option>
                  <option value="5">5 (Fast)</option>
                  <option value="6" selected>6 (Normal)</option>
                  <option value="7">7 (Slow)</option>
                  <option value="8">8 (Slow)</option>
                  <option value="9">9 (Slower)</option>
                </select>
              </label>

              <label for="spell-booster">
                Spell booster
                <input
                  type="number"
                  id="spell-booster"
                  name="spell-booster"
                  min="-2"
                  max="0"
                  value="0"
                />
              </label>
            </fieldset>

            <fieldset>
              <legend>Elemental stuff</legend>

              <label for="ele-amp">
                Element Amplification
                <input
                  type="number"
                  id="ele-amp"
                  name="ele-amp"
                  min="100"
                  value="100"
                />%
              </label>
            </fieldset>

            <details>
              <summary>Combo attack</summary>

              <fieldset>
                <legend>(Advanced) combo attack</legend>

                <label for="ca-active">
                  Active
                  <input type="checkbox" id="ca-active" name="ca-active" />
                </label>

                <label for="ca-dmg">
                  CA+ACA dmg
                  <input
                    type="number"
                    id="ca-dmg"
                    name="ca-dmg"
                    min="100"
                    value="104"
                  />%
                </label>

                <label for="ca-level">
                  CA level
                  <input
                    type="number"
                    id="ca-level"
                    name="ca-level"
                    min="1"
                    max="30"
                    value="1"
                  />
                </label>

                <label for="ca-orbs">
                  Orbs
                  <input
                    type="number"
                    id="ca-orbs"
                    name="ca-orbs"
                    min="1"
                    max="10"
                    value="1"
                  />
                </label>
              </fieldset>
            </details>

            <fieldset>
              <legend>Enemy</legend>

              <label for="enemy-wdef">
                WDEF
                <input
                  type="number"
                  id="enemy-wdef"
                  name="enemy-wdef"
                  value="0"
                />
              </label>

              <label for="enemy-mdef">
                MDEF
                <input
                  type="number"
                  id="enemy-mdef"
                  name="enemy-mdef"
                  value="0"
                />
              </label>

              <label for="ele-sus">
                Element susceptibility
                <select name="ele-sus" id="ele-sus">
                  <option value="0">Immune</option>
                  <option value="0.5">Strong</option>
                  <option value="1" selected>Neutral</option>
                  <option value="1.5">Weak</option>
                </select>
              </label>

              <label for="enemy-level">
                Level
                <input
                  type="number"
                  id="enemy-level"
                  name="enemy-level"
                  min="1"
                  value="1"
                />
              </label>

              <label for="enemy-count">
                Count
                <input
                  type="number"
                  id="enemy-count"
                  name="enemy-count"
                  min="1"
                  max="15"
                  value="1"
                />
              </label>
            </fieldset>
          </div>

          <div id="calculator-output">
            <b>Range, <em>crit range</em>:</b>
            <span id="range">??? ~ ???</span>,
            <em id="crit-range">??? ~ ???</em>
            <br />
            <b>Expected dmg per line:</b>
            <span id="expected-per-hit">???</span>
            <br />
            <b>&sigma;<sub>per line</sub>, CV<sub>per line</sub>:</b>
            <span id="sd-per-hit">???</span>, <span id="cv-per-hit">???</span>
            <br />
            <b>Total range:</b>
            <span id="total-range">??? ~ ???</span>
            <br />
            <b>Total expected dmg per hit:</b>
            <span id="expected-per-hit-total">???</span>
            <br />
            <b>&sigma;<sub>total hit</sub>, CV<sub>total hit</sub>:</b>
            <span id="sd-per-hit-total">???</span>,
            <span id="cv-per-hit-total">???</span>
            <br />
            <b>Expected DPS:</b> <span id="expected-dps">???</span>
            <br />
            <b>&sigma;<sub>DPS</sub>, CV<sub>DPS</sub>:</b>
            <span id="sd-dps">???</span>, <span id="cv-dps">???</span>

            <hr />

            <h3>Magic</h3>

            <b>Range, <em>crit range</em>:</b>
            <span id="range-magic">??? ~ ???</span>,
            <em id="crit-range-magic">??? ~ ???</em>
            <br />
            <b>Expected dmg per line:</b>
            <span id="expected-per-hit-magic">???</span>
            <br />
            <b>&sigma;<sub>per line</sub>, CV<sub>per line</sub>:</b>
            <span id="sd-per-hit-magic">???</span>,
            <span id="cv-per-hit-magic">???</span>
            <br />
            <b>Total range:</b>
            <span id="total-range-magic">??? ~ ???</span>
            <br />
            <b>Total expected dmg per hit:</b>
            <span id="expected-per-hit-total-magic">???</span>
            <br />
            <b>&sigma;<sub>total hit</sub>, CV<sub>total hit</sub>:</b>
            <span id="sd-per-hit-total-magic">???</span>,
            <span id="cv-per-hit-total-magic">???</span>
            <br />
            <b>Expected DPS:</b>
            <span id="expected-dps-magic">???</span>
            <br />
            <b>&sigma;<sub>DPS</sub>, CV<sub>DPS</sub>:</b>
            <span id="sd-dps-magic">???</span>,
            <span id="cv-dps-magic">???</span>

            <hr />

            <h3>Warnings</h3>

            <div id="warnings-div">
              <span id="warnings" class="success">No warnings.</span>
            </div>
          </div>

          <a href="#legal" class="h-anchor"><h2 id="legal">Legal</h2></a>

          <p>
            All of the code on this page is entirely
            <a
              target="_blank"
              rel="noopener noreferrer"
              href="https://en.wikipedia.org/wiki/Free_software"
              >free</a
            >
            (<a
              target="_blank"
              rel="noopener noreferrer"
              href="https://www.gnu.org/licenses/agpl-3.0"
              >GNU AGPL v3</a
            >+). See
            <a href="../source.html" data-jslicense="1">the Source page</a>
            for more information and access to source code.
          </p>
        </main>
      </div>
    </div>
  </body>
</html>
